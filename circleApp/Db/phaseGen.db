#! Generated by VisualDCT v2.7.0
#! DBDSTART
#! DBD("/mnt/c/epics/circle/dbd/circle.dbd")
#! DBDEND


record(calc, "$(user):phaseGen") {
  field(SCAN, "Passive")
  field(CALC, "(A+B<2*PI)?(A+B):(A+B-(2*PI))")
  field(INPA, "$(user):phase.VAL PP")
  field(INPB, "$(user):phaseStep.VAL")
  field(VAL, "0")
}

record(ai, "$(user):phase") {
  field(SCAN, "Passive")
  field(INP, "$(user):phaseGen.VAL")
}

record(ai, "$(user):radius") {
  field(VAL, "1")
}

record(ai, "$(user):xCentre") {
  field(VAL, "0")
}

record(ai, "$(user):yCentre") {
  field(VAL, "0")
}

record(calc, "$(user):xPos") {
  field(CALC, "(B+SIN(A)*C) + D*E")
  field(INPA, "$(user):phase.VAL")
  field(INPB, "$(user):xCentre")
  field(INPC, "$(user):radius")
  field(INPD, "$(user):random PP")
  field(INPE, "$(user):noise")
}

record(calc, "$(user):yPos") {
  field(CALC, "(B+COS(A)*C) + D*E")
  field(INPA, "$(user):phase.VAL")
  field(INPB, "$(user):yCentre")
  field(INPC, "$(user):radius")
  field(INPD, "$(user):random PP")
  field(INPE, "$(user):noise")
}

record(fanout, "$(user):fanout") {
  field(SCAN, ".1 second")
  field(LNK0, "$(user):phaseGen")
  field(LNK1, "$(user):xPosArr")
  field(LNK2, "$(user):yPosArr")
}

record(compress, "$(user):xPosArr") {
  field(SCAN, "Passive")
  field(INP, "$(user):xPos.VAL PP")
  field(NSAM, "100")
}

record(compress, "$(user):yPosArr") {
  field(SCAN, "Passive")
  field(INP, "$(user):yPos.VAL PP")
  field(NSAM, "100")
}

record(ai, "$(user):random") {
  field(SCAN, "Passive")
  field(DTYP, "Random")
  field(INP, "13086")
  field(VAL, "0.0")
}

record(ai, "$(user):noise") {
  field(VAL, "0.1")
}

record(ai, "$(user):phaseStep") {
  field(VAL, "0.1")
}

#! Further lines contain data used by VisualDCT
#! View(-152,-212,0.6)
#! Record("$(user):phaseGen",240,12,0,1,"$(user):phaseGen")
#! Field("$(user):phaseGen.INPA",16777215,1,"$(user):phaseGen.INPA")
#! Link("$(user):phaseGen.INPA","$(user):phase.VAL")
#! Field("$(user):phaseGen.VAL",16777215,0,"$(user):phaseGen.VAL")
#! Field("$(user):phaseGen.INPB",16777215,0,"$(user):phaseGen.INPB")
#! Link("$(user):phaseGen.INPB","$(user):phaseStep.VAL")
#! Record("$(user):phase",500,55,0,1,"$(user):phase")
#! Field("$(user):phase.VAL",16777215,0,"$(user):phase.VAL")
#! Field("$(user):phase.INP",16777215,0,"$(user):phase.INP")
#! Link("$(user):phase.INP","$(user):phaseGen.VAL")
#! Record("$(user):radius",860,510,0,1,"$(user):radius")
#! Field("$(user):radius.VAL",16777215,0,"$(user):radius.VAL")
#! Record("$(user):xCentre",840,250,0,1,"$(user):xCentre")
#! Field("$(user):xCentre.VAL",16777215,0,"$(user):xCentre.VAL")
#! Record("$(user):yCentre",840,390,0,1,"$(user):yCentre")
#! Field("$(user):yCentre.VAL",16777215,0,"$(user):yCentre.VAL")
#! Record("$(user):xPos",500,219,0,1,"$(user):xPos")
#! Field("$(user):xPos.INPB",16777215,1,"$(user):xPos.INPB")
#! Link("$(user):xPos.INPB","$(user):xCentre.VAL")
#! Field("$(user):xPos.INPC",16777215,1,"$(user):xPos.INPC")
#! Link("$(user):xPos.INPC","$(user):radius.VAL")
#! Field("$(user):xPos.INPA",16777215,0,"$(user):xPos.INPA")
#! Link("$(user):xPos.INPA","$(user):phase.VAL")
#! Field("$(user):xPos.VAL",16777215,0,"$(user):xPos.VAL")
#! Field("$(user):xPos.INPD",16777215,1,"$(user):xPos.INPD")
#! Link("$(user):xPos.INPD","$(user):random.VAL")
#! Field("$(user):xPos.INPE",16777215,1,"$(user):xPos.INPE")
#! Link("$(user):xPos.INPE","$(user):noise.VAL")
#! Record("$(user):yPos",500,499,0,1,"$(user):yPos")
#! Field("$(user):yPos.INPB",16777215,1,"$(user):yPos.INPB")
#! Link("$(user):yPos.INPB","$(user):yCentre.VAL")
#! Field("$(user):yPos.INPC",16777215,1,"$(user):yPos.INPC")
#! Link("$(user):yPos.INPC","$(user):radius.VAL")
#! Field("$(user):yPos.INPA",16777215,0,"$(user):yPos.INPA")
#! Link("$(user):yPos.INPA","$(user):phase.VAL")
#! Field("$(user):yPos.VAL",16777215,0,"$(user):yPos.VAL")
#! Field("$(user):yPos.INPD",16777215,1,"$(user):yPos.INPD")
#! Link("$(user):yPos.INPD","$(user):random.VAL")
#! Field("$(user):yPos.INPE",16777215,1,"$(user):yPos.INPE")
#! Link("$(user):yPos.INPE","$(user):noise.VAL")
#! Record("$(user):fanout",20,367,0,1,"$(user):fanout")
#! Field("$(user):fanout.LNK0",16777215,1,"$(user):fanout.LNK0")
#! Link("$(user):fanout.LNK0","$(user):phaseGen")
#! Field("$(user):fanout.LNK1",16777215,1,"$(user):fanout.LNK1")
#! Link("$(user):fanout.LNK1","$(user):xPosArr")
#! Field("$(user):fanout.LNK2",16777215,1,"$(user):fanout.LNK2")
#! Link("$(user):fanout.LNK2","$(user):yPosArr")
#! Record("$(user):xPosArr",200,242,0,1,"$(user):xPosArr")
#! Field("$(user):xPosArr.INP",16777215,1,"$(user):xPosArr.INP")
#! Link("$(user):xPosArr.INP","$(user):xPos.VAL")
#! Record("$(user):yPosArr",200,602,0,1,"$(user):yPosArr")
#! Field("$(user):yPosArr.INP",16777215,1,"$(user):yPosArr.INP")
#! Link("$(user):yPosArr.INP","$(user):yPos.VAL")
#! Record("$(user):random",860,47,0,1,"$(user):random")
#! Field("$(user):random.VAL",16777215,0,"$(user):random.VAL")
#! Record("$(user):noise",860,630,0,1,"$(user):noise")
#! Field("$(user):noise.VAL",16777215,0,"$(user):noise.VAL")
#! Record("$(user):phaseStep",20,110,0,1,"$(user):phaseStep")
#! Field("$(user):phaseStep.VAL",16777215,0,"$(user):phaseStep.VAL")
